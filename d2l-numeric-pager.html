<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../d2l-colors/d2l-colors.html">
<link rel="import" href="../d2l-icons/tier1-icons.html">
<link rel="import" href="../d2l-image-action/d2l-image-action.html">
<link rel="import" href="../d2l-typography/d2l-typography.html">
<link rel="import" href="../iron-input/iron-input.html">

<!--
`d2l-numeric-pager`
Numeric Pager used in Brightspace Platform

@demo demo/index.html
-->

<dom-module id="d2l-numeric-pager">
	<template>
		<style include="d2l-colors d2l-typography"></style>
		<style>
		:host {
			display: inline-block;
		}
		input {
			width: 3rem;
			height: 2rem;
			text-align: center;
		}
		input:focus,
		input:hover {
			border-color: var(--d2l-color-celestine);
		}
		span {
			font-weight: lighter;
			width: 2rem;
		}
		</style>
		<div>
			<button is="d2l-image-action"
					icon="d2l-tier1:chevron-left"
					on-tap="_previousPage"
					aria-label$="[[previousLabel]]">
			</button>
			<input is="iron-input"
				type=text
				prevent-invalid-input allowed-pattern="[0-9]"
				bind-value={{currentPage}}
				on-change="_onChange">
			</input>
			<span>/</span>
			<span>[[pageCount]]</span>
			<button is="d2l-image-action"
					icon="d2l-tier1:chevron-right"
					on-tap="_nextPage"
					aria-label$="[[nextLabel]]">
			</button>
		</div>
	</template>

  <script>
    Polymer({

    is: 'd2l-numeric-pager',
	properties: {
		pageCount: Number,
		currentPage: {
			type: Number,
			value: 1,
			notify: true,
			reflectToAttribute: true
		},
		previousLabel: {
			type: String,
			value: "Previous Page",
		},
		nextLabel: {
			type: String,
			value: "Next Page",
		}
	},
	_onChange: function(){
		if(parseInt(this.currentPage) < 1 || parseInt(this.currentPage) > parseInt(this.pageCount)){
			this.currentPage = 1;
		}
	},
	_previousPage: function(){
		var min = 1;
		this.currentPage = this.currentPage === 1 ? min : (parseInt(this.currentPage) - 1);
	},

	_nextPage: function(){
		var max = parseInt(this.pageCount);
		this.currentPage = this.currentPage === max ? max : (parseInt(this.currentPage) + 1);
	}

    });
  </script>
</dom-module>
